import{extend as rt,Svg as mt,on as P,off as I,Box as K,Matrix as Q}from"./main-1a102dd9.js";const S=o=>o.touches||[{clientX:o.clientX,clientY:o.clientY}];rt(mt,{panZoom(o){var y,z,N,b,L,F,B,k,q,U,W;if(this.off(".panZoom"),o===!1)return this;o=o!=null?o:{};const $=(y=o.zoomFactor)!=null?y:2,X=(z=o.zoomMin)!=null?z:Number.MIN_VALUE,g=(N=o.zoomMax)!=null?N:Number.MAX_VALUE,tt=(b=o.wheelZoom)!=null?b:!0,et=(L=o.pinchZoom)!=null?L:!0,M=(F=o.panning)!=null?F:!0,D=(B=o.panButton)!=null?B:0,T=(k=o.oneFingerPan)!=null?k:!1,V=(q=o.margins)!=null?q:!1,nt=(U=o.wheelZoomDeltaModeLinePixels)!=null?U:17,ot=(W=o.wheelZoomDeltaModeScreenPixels)!=null?W:53;let R,i,_=!1;const h=this.viewbox(),w=t=>{if(!V)return t;const{top:n,left:s,bottom:l,right:r}=V,{width:a,height:c}=this.attr(["width","height"]),e=this.node.preserveAspectRatio.baseVal;let E=0,f=0,u=0,Z=0;if(e.align!==e.SVG_PRESERVEASPECTRATIO_NONE){const A=a/c,d=h.width/h.height;if(d!==A){const H=e.meetOrSlice!==e.SVG_MEETORSLICE_SLICE,O=A>d?"width":"height",j=O==="width",J=H&&j||!H&&!j,ht=J?A/d:d/A,m=t[O]-t[O]*ht;J?e.align===e.SVG_PRESERVEASPECTRATIO_XMIDYMIN||e.align===e.SVG_PRESERVEASPECTRATIO_XMIDYMID||e.align===e.SVG_PRESERVEASPECTRATIO_XMIDYMAX?(E=m/2,f=-m/2):e.align===e.SVG_PRESERVEASPECTRATIO_XMINYMIN||e.align===e.SVG_PRESERVEASPECTRATIO_XMINYMID||e.align===e.SVG_PRESERVEASPECTRATIO_XMINYMAX?f=-m:(e.align===e.SVG_PRESERVEASPECTRATIO_XMAXYMIN||e.align===e.SVG_PRESERVEASPECTRATIO_XMAXYMID||e.align===e.SVG_PRESERVEASPECTRATIO_XMAXYMAX)&&(E=m):e.align===e.SVG_PRESERVEASPECTRATIO_XMINYMID||e.align===e.SVG_PRESERVEASPECTRATIO_XMIDYMID||e.align===e.SVG_PRESERVEASPECTRATIO_XMAXYMID?(u=m/2,Z=-m/2):e.align===e.SVG_PRESERVEASPECTRATIO_XMINYMIN||e.align===e.SVG_PRESERVEASPECTRATIO_XMIDYMIN||e.align===e.SVG_PRESERVEASPECTRATIO_XMAXYMIN?Z=-m:(e.align===e.SVG_PRESERVEASPECTRATIO_XMINYMAX||e.align===e.SVG_PRESERVEASPECTRATIO_XMIDYMAX||e.align===e.SVG_PRESERVEASPECTRATIO_XMAXYMAX)&&(u=m)}}const st=h.width+h.x-s-E,at=h.x+r-t.width-f,ct=h.height+h.y-n-u,lt=h.y+l-t.height-Z;return t.x=Math.min(st,Math.max(at,t.x)),t.y=Math.min(ct,Math.max(lt,t.y)),t},it=function(t){t.preventDefault();let n;switch(t.deltaMode){case 1:n=t.deltaY*nt;break;case 2:n=t.deltaY*ot;break;default:n=t.deltaY;break}let s=Math.pow(1+$,-1*n/100)*this.zoom();const l=this.point(t.clientX,t.clientY);if(s>g&&(s=g),s<X&&(s=X),this.dispatch("zoom",{level:s,focus:l}).defaultPrevented)return this;if(this.zoom(s,l),V){const r=w(this.viewbox());this.viewbox(r)}},Y=function(t){if(i=S(t),i.length<2){M&&T&&p.call(this,t);return}M&&T&&x.call(this,t),t.preventDefault(),!this.dispatch("pinchZoomStart",{event:t}).defaultPrevented&&(this.off("touchstart.panZoom",Y),_=!0,P(document,"touchmove.panZoom",C,this,{passive:!1}),P(document,"touchend.panZoom",v,this,{passive:!1}))},v=function(t){t.preventDefault();const n=S(t);n.length>1||(_=!1,this.dispatch("pinchZoomEnd",{event:t}),I(document,"touchmove.panZoom",C),I(document,"touchend.panZoom",v),this.on("touchstart.panZoom",Y),n.length&&M&&T&&p.call(this,t))},C=function(t){t.preventDefault();const n=S(t),s=this.zoom(),l=Math.sqrt(Math.pow(i[0].clientX-i[1].clientX,2)+Math.pow(i[0].clientY-i[1].clientY,2)),r=Math.sqrt(Math.pow(n[0].clientX-n[1].clientX,2)+Math.pow(n[0].clientY-n[1].clientY,2));let a=l/r;(s<X&&a>1||s>g&&a<1)&&(a=1);const c={x:n[0].clientX+.5*(n[1].clientX-n[0].clientX),y:n[0].clientY+.5*(n[1].clientY-n[0].clientY)},e={x:i[0].clientX+.5*(i[1].clientX-i[0].clientX),y:i[0].clientY+.5*(i[1].clientY-i[0].clientY)},E=this.point(c.x,c.y),f=this.point(2*c.x-e.x,2*c.y-e.y),u=new K(this.viewbox()).transform(new Q().translate(-f.x,-f.y).scale(a,0,0).translate(E.x,E.y));w(u),this.viewbox(u),i=n,this.dispatch("zoom",{box:u,focus:f})},p=function(t){t.type.indexOf("mouse")>-1&&t.button!==D&&t.which!==D+1||(t.preventDefault(),this.off("mousedown.panZoom",p),i=S(t),!_&&(this.dispatch("panStart",{event:t}),R={x:i[0].clientX,y:i[0].clientY},P(document,"touchmove.panZoom mousemove.panZoom",G,this,{passive:!1}),P(document,"touchend.panZoom mouseup.panZoom",x,this,{passive:!1})))},x=function(t){t.preventDefault(),I(document,"touchmove.panZoom mousemove.panZoom",G),I(document,"touchend.panZoom mouseup.panZoom",x),this.on("mousedown.panZoom",p),this.dispatch("panEnd",{event:t})},G=function(t){t.preventDefault();const n=S(t),s={x:n[0].clientX,y:n[0].clientY},l=this.point(s.x,s.y),r=this.point(R.x,R.y),a=[r.x-l.x,r.y-l.y];if(!a[0]&&!a[1])return;const c=new K(this.viewbox()).transform(new Q().translate(a[0],a[1]));R=s,w(c),!this.dispatch("panning",{box:c,event:t}).defaultPrevented&&this.viewbox(c)};return tt&&this.on("wheel.panZoom",it,this,{passive:!1}),et&&this.on("touchstart.panZoom",Y,this,{passive:!1}),M&&this.on("mousedown.panZoom",p,this,{passive:!1}),this}});
